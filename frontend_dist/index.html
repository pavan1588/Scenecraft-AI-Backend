<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SceneCraftÂ AI</title>
  <style>
    /* Basic reset & type */
    * { box-sizing:border-box; margin:0; padding:0; }
    body { font-family:Arial,sans-serif; background:#0a0a0a; color:#eee; }
    a { text-decoration:none; color:inherit; }

    /* Hidden until auth */
    #app { display:none; }

    /* Header/Nav */
    header {
      background:#11182a;
      padding:1rem 2rem;
      display:flex; align-items:center; justify-content:space-between;
      position:sticky; top:0; z-index:100;
    }
    .logo { font-size:1.5rem; color:#fdd835; font-weight:bold; }
    nav a {
      margin-left:1.5rem;
      padding:.5rem;
      color:#bbb;
      transition:color .2s;
    }
    nav a.active, nav a:hover {
      color:#fdd835;
    }
    nav a.disabled {
      color:#555; cursor:default;
    }

    /* Hero */
    .hero {
      text-align:center;
      padding:6rem 2rem 4rem;
    }
    .hero h1 { font-size:3rem; color:#fdd835; margin-bottom:1rem; }
    .hero p { max-width:600px; margin:0 auto; color:#ccc; font-size:1.1rem; }

    /* Features */
    .features {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:1.5rem;
      padding:0 2rem;
    }
    .feature {
      background:#1a1a2e;
      border-radius:8px;
      padding:1.5rem;
      text-align:center;
    }
    .feature h3 { margin-bottom:.75rem; }
    .feature p { color:#bbb; }
    .feature.coming-soon {
      opacity:.5;
    }

    /* Main container */
    .container { max-width:1000px; margin:2rem auto; }

    /* Analyzer panel */
    #analyzer {
      display:none;
      background:#1a1a2e;
      padding:2rem;
      border-radius:8px;
      margin:2rem auto;
      max-width:800px;
    }
    #analyzer h2 { color:#fdd835; margin-bottom:1rem; }
    #analyzer textarea {
      width:100%; height:180px; background:#0f0f1f; color:#fff;
      border:none; padding:1rem; border-radius:5px;
      font-family:inherit; font-size:1rem;
    }
    .controls {
      margin-top:1rem;
      display:flex; align-items:center; gap:1rem;
    }
    .controls label { color:#ccc; font-size:.9rem; }
    button {
      margin-top:1.5rem;
      background:#fdd835; color:#111;
      border:none; padding:.75rem 1.5rem;
      font-size:1rem; border-radius:5px;
      cursor:pointer; font-weight:bold;
    }
    #output { margin-top:1.5rem; }
    #output p { margin-bottom:1rem; line-height:1.5; }

    /* Footer */
    footer {
      text-align:center; padding:2rem; color:#555; font-size:.9rem;
    }
  </style>

  <script>
    // 1) Password gate once per session
    (function(){
      const key = 'scene_access_granted';
      if (!sessionStorage.getItem(key)) {
        const pw = prompt("ðŸ”’ Enter site password:");
        if (pw !== "SCENECRAFT-2024") {
          document.write('<div style="color:red;text-align:center;padding:3rem;"><h1>Access Denied</h1></div>');
          window.stop();
        }
        sessionStorage.setItem(key, 'true');
      }
      // show the app
      document.addEventListener('DOMContentLoaded', ()=> {
        document.getElementById('app').style.display = 'block';
      });
    })();
  </script>
</head>

<body>
  <div id="app">
    <!-- NAV -->
    <header>
      <div class="logo">SceneCraftÂ AI</div>
      <nav>
        <a id="navHome" class="active">Home</a>
        <a id="navAnalyzer">Scene Analyzer</a>
        <a class="disabled">Scene Editor</a>
        <a class="disabled">Full Script Writer</a>
        <a class="disabled">How it Works</a>
        <a class="disabled">Pricing</a>
      </nav>
    </header>

    <!-- HERO -->
    <section class="hero">
      <h1>SceneCraftÂ AI</h1>
      <p>Your cinematic storytelling partnerâ€”melding AI expertise with filmmaker craft to deliver instant, actionable feedback on your scenes.</p>
    </section>

    <!-- FEATURES -->
    <div class="container features">
      <div class="feature">
        <h3>Scene Analyzer</h3>
        <p>Deep insights on pacing, stakes, dialogue, and visual grammar.</p>
      </div>
      <div class="feature coming-soon">
        <h3>Scene Editor</h3>
        <p>Lineâ€‘byâ€‘line rewrite suggestions (ComingÂ Soon)</p>
      </div>
      <div class="feature coming-soon">
        <h3>Full Script Writer</h3>
        <p>(ComingÂ Soon)</p>
      </div>
      <div class="feature coming-soon">
        <h3>How it Works</h3>
        <p>(ComingÂ Soon)</p>
      </div>
      <div class="feature coming-soon">
        <h3>Pricing</h3>
        <p>(ComingÂ Soon)</p>
      </div>
    </div>

    <!-- SCENE ANALYZER PANEL -->
    <section id="analyzer" class="container">
      <h2>SceneÂ Analyzer</h2>
      <textarea id="sceneInput" placeholder="Paste your scene hereâ€¦"></textarea>
      <div class="controls">
        <input type="file" id="sceneFile" accept=".txt,.pdf"/>
        <label><input type="checkbox" id="agreeChk"/> I agree to <a href="terms" style="color:#fdd835;">TermsÂ &Â Conditions</a></label>
      </div>
      <button id="analyzeBtn">Analyze Scene</button>
      <div id="output"></div>
    </section>

    <footer>&copy;Â 2025Â SceneCraftÂ AI</footer>
  </div>

  <script>
    // TAB LOGIC
    document.getElementById('navHome').onclick = () => {
      document.querySelector('.hero').scrollIntoView({behavior:'smooth'});
      document.querySelector('.hero').classList.add('visible');
      document.querySelector('.features').classList.add('visible');
      document.getElementById('analyzer').style.display = 'none';
      document.getElementById('navHome').classList.add('active');
      document.getElementById('navAnalyzer').classList.remove('active');
    };
    document.getElementById('navAnalyzer').onclick = () => {
      document.getElementById('analyzer').style.display = 'block';
      document.querySelector('.hero').classList.remove('visible');
      document.querySelector('.features').classList.remove('visible');
      document.getElementById('navAnalyzer').classList.add('active');
      document.getElementById('navHome').classList.remove('active');
    };

    // SCENE ANALYZER LOGIC
    const analyzeBtn = document.getElementById('analyzeBtn'),
          sceneInput = document.getElementById('sceneInput'),
          sceneFile  = document.getElementById('sceneFile'),
          agreeChk   = document.getElementById('agreeChk'),
          output     = document.getElementById('output');

    analyzeBtn.onclick = () => {
      if (!agreeChk.checked) return alert('Please accept the TermsÂ &Â Conditions.');
      let promise = sceneInput.value.trim()
        ? Promise.resolve(sceneInput.value.trim())
        : sceneFile.files[0]?.text();
      promise.then(scene => {
        if (scene.length < 10) return alert('Enter at least 10 characters.');
        output.innerHTML = '<p style="color:#fdd835;">Analyzingâ€¦</p>';
        fetch('/analyze', {
          method:'POST',
          headers:{ 'Content-Type':'application/json', 'x-user-agreement':'true' },
          body: JSON.stringify({ scene })
        })
        .then(r=>r.json())
        .then(d=>{
          output.innerHTML = d.analysis
            .split('\n\n')
            .map(p=>`<p>${p}</p>`).join('');
        })
        .catch(e=>output.innerHTML=`<p style="color:red;">Error: ${e.message}</p>`);
      });
    };
  </script>
</body>
</html>
