<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SceneCraftÂ AI</title>
  <style>
    * { box-sizing:border-box; margin:0; padding:0; }
    body { font-family:Arial,sans-serif; background:#0a0a0a; color:#eee; }
    #app { display:none; }
    header {
      background:#11182a; padding:1rem 2rem;
      display:flex; justify-content:space-between; align-items:center;
      position:sticky; top:0; z-index:10;
    }
    .logo { font-size:1.5rem; color:#fdd835; }
    nav a {
      margin-left:1.5rem; padding:.5rem;
      color:#bbb; cursor:pointer; transition:color .2s;
    }
    nav a.active, nav a:hover { color:#fdd835; }
    nav a.disabled { color:#555; cursor:default; }
    .container { max-width:900px; margin:2rem auto; padding:0 2rem; }
    .hero { text-align:center; padding:4rem 0 2rem; }
    .hero h1 { font-size:3rem; color:#fdd835; margin-bottom:1rem; }
    .hero p { color:#ccc; font-size:1.1rem; }
    .features {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:1.5rem; margin-top:2rem;
    }
    .feature {
      background:#1a1a2e; border-radius:8px; padding:1.5rem; text-align:center;
    }
    .feature.coming-soon { opacity:.5; }
    section { display:none; }
    section.visible { display:block; }
    textarea {
      width:100%; height:200px; background:#1a1a2e; color:#fff;
      border:none; padding:1rem; border-radius:5px; font-size:1rem;
    }
    .controls { margin-top:1rem; display:flex; align-items:center; gap:1rem; }
    button {
      margin-top:1.5rem; background:#fdd835; color:#111;
      border:none; padding:.75rem 1.5rem; border-radius:5px;
      font-weight:bold; cursor:pointer;
    }
    #output, #editOutput { margin-top:1.5rem; padding:1rem; background:#1a1a2e; border-radius:5px; }
    #output p, #editOutput p { margin-bottom:1rem; line-height:1.5; }
    footer { text-align:center; padding:2rem 0; color:#555; font-size:.9rem; }
  </style>

  <script>
    // prompt on every load
    (function(){
      const pw = prompt("ðŸ”’ Enter site password:");
      if (pw !== "SCENECRAFT-2024") {
        document.write('<div style="color:red;text-align:center;padding:3rem;"><h1>Access Denied</h1></div>');
        window.stop();
      } else {
        window.addEventListener('DOMContentLoaded', ()=> {
          document.getElementById('app').style.display = 'block';
        });
      }
    })();
  </script>
</head>

<body>
  <div id="app">
    <header>
      <div class="logo">SceneCraftÂ AI</div>
      <nav>
        <a id="tabHome" class="active">Home</a>
        <a id="tabAnalyzer">Scene Analyzer</a>
        <a id="tabEditor">Scene Editor</a>
        <a class="disabled">Full Script Writer</a>
        <a class="disabled">How it Works</a>
        <a class="disabled">Pricing</a>
      </nav>
    </header>

    <div class="container">
      <!-- HOME -->
      <section id="home" class="visible">
        <div class="hero">
          <h1>SceneCraftÂ AI</h1>
          <p>Your cinematic storytelling partnerâ€”melding AI expertise with filmmaker craft to deliver instant, actionable feedback.</p>
        </div>
        <div class="features">
          <div class="feature"><h3>Scene Analyzer</h3><p>Deep insights on pacing, stakes, dialogue, and visual grammar.</p></div>
          <div class="feature"><h3>Scene Editor</h3><p>Lineâ€‘byâ€‘line rewrite suggestions with alternate phrasing.</p></div>
          <div class="feature coming-soon"><h3>Full Script Writer</h3><p>(ComingÂ Soon)</p></div>
          <div class="feature coming-soon"><h3>How it Works</h3><p>(ComingÂ Soon)</p></div>
          <div class="feature coming-soon"><h3>Pricing</h3><p>(ComingÂ Soon)</p></div>
        </div>
      </section>

      <!-- ANALYZER -->
      <section id="analyzer">
        <h2>SceneÂ Analyzer</h2>
        <textarea id="sceneInput" placeholder="Paste your scene hereâ€¦"></textarea>
        <div class="controls">
          <input type="file" id="sceneFile" accept=".txt,.pdf"/>
          <label><input type="checkbox" id="agreeChk"/> I agree to <a href="terms" style="color:#fdd835;">TermsÂ &Â Conditions</a></label>
        </div>
        <button id="analyzeBtn">Analyze Scene</button>
        <div id="output"></div>
      </section>

      <!-- EDITOR -->
      <section id="editor">
        <h2>SceneÂ Editor</h2>
        <textarea id="sceneInputEditor" placeholder="Paste your scene hereâ€¦"></textarea>
        <div class="controls">
          <input type="file" id="sceneFileEditor" accept=".txt,.pdf"/>
          <label><input type="checkbox" id="agreeChkEditor"/> I agree to <a href="terms" style="color:#fdd835;">TermsÂ &Â Conditions</a></label>
        </div>
        <button id="editBtn">Get Rewrite Suggestions</button>
        <div id="editOutput"></div>
      </section>
    </div>

    <footer>&copy;Â 2025Â SceneCraftÂ AI</footer>
  </div>

  <script>
    // TAB SWITCHING
    const sections = { home:1, analyzer:1, editor:1 };
    function show(tab){
      for(let s in sections){
        document.getElementById(s).classList.toggle('visible', s===tab);
        document.getElementById('tab'+s.charAt(0).toUpperCase()+s.slice(1))
          .classList.toggle('active', s===tab);
      }
    }
    document.getElementById('tabHome').onclick     = ()=> show('home');
    document.getElementById('tabAnalyzer').onclick = ()=> show('analyzer');
    document.getElementById('tabEditor').onclick   = ()=> show('editor');

    // ANALYZER LOGIC
    document.getElementById('analyzeBtn').onclick = () => {
      const scene = document.getElementById('sceneInput').value.trim();
      if (!document.getElementById('agreeChk').checked) return alert('Accept Terms & Conditions.');
      if (scene.length<10) return alert('Enter â‰¥10 characters.');
      const out = document.getElementById('output');
      out.innerHTML = '<p style="color:#fdd835;">Analyzingâ€¦</p>';
      fetch('/analyze',{method:'POST',headers:{
        'Content-Type':'application/json','x-user-agreement':'true'
      },body:JSON.stringify({scene})})
      .then(r=>r.json()).then(d=>{
        out.innerHTML = d.analysis.split('\n\n').map(p=>`<p>${p}</p>`).join('');
      })
      .catch(e=>out.innerHTML=`<p style="color:red;">Error: ${e.message}</p>`);
    };

    // EDITOR LOGIC
    document.getElementById('editBtn').onclick = () => {
      const scene = document.getElementById('sceneInputEditor').value.trim();
      if (!document.getElementById('agreeChkEditor').checked) return alert('Accept Terms & Conditions.');
      if (scene.length<10) return alert('Enter â‰¥10 characters.');
      const out = document.getElementById('editOutput');
      out.innerHTML = '<p style="color:#fdd835;">Generating rewritesâ€¦</p>';
      fetch('/editor/analyze',{method:'POST',headers:{
        'Content-Type':'application/json','x-user-agreement':'true'
      },body:JSON.stringify({scene})})
      .then(r=>r.json()).then(d=>{
        out.innerHTML = (d.rewrites||'').split('\n\n').map(p=>`<p>${p}</p>`).join('');
      })
      .catch(e=>out.innerHTML=`<p style="color:red;">Error: ${e.message}</p>`);
    };
  </script>
</body>
</html>
