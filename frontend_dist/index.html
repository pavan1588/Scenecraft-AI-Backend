<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SceneCraft AI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0e0e0e;
      color: #ffd700;
      margin: 0;
    }
    header {
      background: #1a1a1a;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav a {
      color: #ffd700;
      margin: 0 1rem;
      text-decoration: none;
      cursor: pointer;
    }
    nav a.active {
      text-decoration: underline;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 2rem;
    }
    textarea, pre, input[type="file"] {
      width: 100%;
      padding: 1rem;
      margin-bottom: 1rem;
      background: #fefefe;
      color: #111;
      font-size: 1rem;
      border: 1px solid #999;
      border-radius: 4px;
    }
    button {
      padding: 0.6rem 1rem;
      background: #222;
      color: #ffd700;
      border: 1px solid #555;
      cursor: pointer;
    }
    #password-gate {
      padding: 2rem;
      text-align: center;
    }
    .hidden { display: none; }
    .output-block {
      background: #222;
      padding: 1rem;
      white-space: pre-wrap;
      border-left: 4px solid #ffd700;
    }
  </style>
</head>
<body>
  <div id="password-gate">
    <h2>Enter Access Key to Continue</h2>
    <input type="password" id="access" placeholder="Access Key" />
    <button onclick="checkAccess()">Unlock</button>
    <p id="access-error" style="color:red;"></p>
  </div>

  <div id="main-app" class="hidden">
    <header>
      <h2>ðŸŽ¬ SceneCraft AI</h2>
      <nav>
        <a onclick="showSection('home')" id="tab-home">Home</a>
        <a onclick="showSection('analyzer')" id="tab-analyzer">Scene Analyzer</a>
        <a onclick="showSection('editor')" id="tab-editor">Scene Editor</a>
        <a>Full Script Writer</a>
        <a>How it Works</a>
        <a>Pricing</a>
      </nav>
    </header>

    <div class="container">
      <div id="home">
        <h3>Welcome to SceneCraft AI</h3>
        <p>SceneCraft AI is your creative script companion. Analyze emotional beats, cinematic pacing, realism, and moreâ€”or dive deep into editing suggestions with director-level guidance. Upload scripts, assess impact, and make it production-ready.</p>
      </div>

      <div id="analyzer" class="hidden">
        <h3>Scene Analyzer</h3>
        <textarea id="scene-input-analyze" placeholder="Paste your scene here..."></textarea>
        <input type="file" />
        <button onclick="analyze()">Analyze</button>
        <p id="analyze-status"></p>
        <div id="analyze-output" class="output-block"></div>
      </div>

      <div id="editor" class="hidden">
        <h3>Scene Editor (Max: 2 pages)</h3>
        <textarea id="scene-input-edit" placeholder="Paste your two-page scene here..."></textarea>
        <input type="file" />
        <button onclick="edit()">Edit Suggestion</button>
        <p id="edit-status"></p>
        <div id="edit-output" class="output-block"></div>
      </div>

      <div id="terms">
        <h4>Terms & Conditions</h4>
        <p>All content submitted to SceneCraft AI remains the intellectual property of the user. By using this service, you agree not to upload copyrighted material unless you are the rightful owner or have permission to use it. SceneCraft AI does not claim any rights over submitted content and is not liable for copyright infringement claims arising from user input.</p>
        <p>This service is offered as-is, without warranties. SceneCraft AI reserves the right to suspend access if abusive or unlawful behavior is detected. All analysis is AI-generated and should be used as guidance, not final judgment.</p>
      </div>
    </div>
  </div>

  <script>
    const PASSWORD = atob("cHJhbnRhc2RhdHdhbnRh");

    function checkAccess() {
      const input = document.getElementById("access").value;
      if (input === PASSWORD) {
        document.getElementById("password-gate").classList.add("hidden");
        document.getElementById("main-app").classList.remove("hidden");
        showSection('home');
      } else {
        document.getElementById("access-error").innerText = "Access Denied";
      }
    }

    function showSection(id) {
      ["home", "analyzer", "editor"].forEach(s => {
        document.getElementById(s).classList.add("hidden");
        document.getElementById(`tab-${s}`)?.classList.remove("active");
      });
      document.getElementById(id).classList.remove("hidden");
      document.getElementById(`tab-${id}`)?.classList.add("active");

      // Reset outputs and inputs
      if (id === "analyzer") {
        document.getElementById("scene-input-analyze").value = "";
        document.getElementById("analyze-output").textContent = "";
        document.getElementById("analyze-status").textContent = "";
      } else if (id === "editor") {
        document.getElementById("scene-input-edit").value = "";
        document.getElementById("edit-output").textContent = "";
        document.getElementById("edit-status").textContent = "";
      }
    }

    async function analyze() {
      const scene = document.getElementById("scene-input-analyze").value;
      if (!scene.trim()) return;
      document.getElementById("analyze-status").textContent = "Analyzing...";
      const res = await fetch("/analyze", {
        method: "POST",
        headers: { "Content-Type": "application/json", "x-user-agreement": "true" },
        body: JSON.stringify({ scene })
      });
      const data = await res.json();
      document.getElementById("analyze-output").textContent = data.analysis || JSON.stringify(data);
      document.getElementById("analyze-status").textContent = "";
    }

    async function edit() {
      const scene = document.getElementById("scene-input-edit").value;
      if (!scene.trim()) return;
      document.getElementById("edit-status").textContent = "Editing...";
      const res = await fetch("/edit", {
        method: "POST",
        headers: { "Content-Type": "application/json", "x-user-agreement": "true" },
        body: JSON.stringify({ scene })
      });
      const data = await res.json();
      document.getElementById("edit-output").textContent = data.edit_suggestions || JSON.stringify(data);
      document.getElementById("edit-status").textContent = "";
    }
  </script>
</body>
</html>
